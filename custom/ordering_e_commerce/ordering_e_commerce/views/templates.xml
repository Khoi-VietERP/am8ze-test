<odoo>
        <template id="assets_frontend" name="My style" inherit_id="website.assets_frontend">
            <xpath expr="link[last()]" position="after">
                <link rel="stylesheet" type="text/scss" href="/ordering_e_commerce/static/src/scss/style_enterprise.scss"/>
            </xpath>

            <xpath expr="script[last()]" position="after">
                <script type="text/javascript" src="/ordering_e_commerce/static/src/js/enterprise_sale.js"/>
            </xpath>
        </template>


        <template id="blanket_order_list" name="Blanket Order Dropdown">
            <div class="form-group">
                <form target="_self" action="/enterprise/blanket" method="get" class="float-right">
                    <select name="blanket_order" class="form-control link-style"
                            onchange="$(this).closest('form').submit();">
                        <option value="">Select Blanket Order</option>
                        <t t-foreach="website_sale_order_rec" t-as="blanket">
                            <option t-esc="blanket.name" t-att-value="blanket.id"/>
                        </t>
                    </select>
                </form>
            </div>
        </template>


        <template id="wizard_checkout" name="Wizard Checkout">
            <t t-set="website_sale_order" t-value="website_sale_order"/>
            <div class="row wizard_checkout">
                <div class="col-xl">
                    <div class="wizard">
                        <div class="progress-wizard">
                            <span class="no-decoration">
                                <div id="wizard-step10"
                                     t-att-class="'progress-wizard-step active'">
                                    <div class="progress-wizard-bar d-none d-md-block"/>
                                    <span class="progress-wizard-dot d-none d-md-inline-block"/>
                                    <div class="text-center progress-wizard-steplabel">Review Order</div>
                                </div>
                            </span>
                            <span class="no-decoration">
                                <div id="wizard-step20"
                                     t-att-class="'progress-wizard-step active'">
                                    <div class="progress-wizard-bar d-none d-md-block"/>
                                    <span class="progress-wizard-dot d-none d-md-inline-block"/>
                                    <div class="text-center progress-wizard-steplabel">Address</div>
                                </div>
                            </span>
                            <span class="no-decoration">
                                <div id="wizard-step40"
                                     t-att-class="'progress-wizard-step active'">
                                    <div class="progress-wizard-bar d-none d-md-block"/>
                                    <span class="progress-wizard-dot d-none d-md-inline-block"/>
                                    <div class="text-center progress-wizard-steplabel">Confirm Order</div>
                                </div>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="cart_lines" name="Cart Lines">
            <div t-if="not product_ids"
                 class="js_cart_lines alert alert-info">
                Products are not available!
            </div>
            <table class="mb16 table table-striped table-sm js_cart_lines" id="cart_products"
                   t-if="product_ids">
                <t t-foreach="category_ids" t-as="category">
                    <thead>
                        <tr>
                            <th class="td-img"><span t-esc="category.name"/></th>
                            <th class='td-product_name'/>
                            <th class="text-center td-price">Unit Price</th>
                            <th class="text-center td-qty">Quantity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="products" t-value="product_ids.filtered(lambda x: x.categ_id.id == category.id)"/>
                        <t t-foreach="products" t-as="line">
                            <t t-set="line" t-value="line.sudo()"/>
                            <tr>
                                <td align="center" t-if="line.product_tmpl_id" class='td-img'>
                                    <span t-field="line.image_small"
                                          t-options="{'widget': 'image', 'class': 'rounded'}"/>
                                </td>
                                <td t-if="line.product_tmpl_id" class='td-product_name'>
                                    <div>
                                        <strong t-esc="line.product_tmpl_id.name"/>
                                        <span class="enterprise-sale-search-name" t-esc="line.product_tmpl_id.name.lower()"/>
                                    </div>
                                </td>
                                <td class="text-center td-price" name="price">
                                    <t t-set="first_possible_combination" t-value="line.product_tmpl_id._get_first_possible_combination()"/>
                                    <t t-set="combination_info" t-value="line.product_tmpl_id._get_combination_info(first_possible_combination, add_qty=1, pricelist=pricelist)"/>
                                    <span t-att-data-product-id="line.id"
                                          t-esc="combination_info['price']"
                                          t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                </td>
                                <td class="text-center td-qty">
                                    <div class="css_quantity input-group mx-auto oe_website_spinner">
                                        <div class="input-group-prepend">
                                            <span
                                               class="btn btn-link js_add_cart_json_button d-none d-md-inline-block"
                                               aria-label="Remove one" title="Remove one">
                                                <i class="fa fa-minus"/>
                                            </span>
                                        </div>
                                        <input name="quantity" type="text"
                                               class="js_quantity form-control quantity"
                                               t-att-data-line-id="line.id"
                                               value="0"/>
                                        <div class="input-group-append">
                                            <span
                                               class="btn btn-link float_left js_add_cart_json_button d-none d-md-inline-block"
                                               aria-label="Add one" title="Add one">
                                                <i class="fa fa-plus"/>
                                            </span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </t>
            </table>
        </template>

        <template id="blanket_cart" name="Shopping Cart">
            <t t-call="website.layout">
                <t t-set="website_sale_order" t-value="website.sale_get_order()"/>
                <div id="wrap" class="enterprise_sale">
                    <div class="container py-2">
                        <div class="products_pager form-inline justify-content-center">
<!--                            <t t-call="ordering_e_commerce.cart_lines"/>-->
                            <!--<t t-call="ordering_e_commerce.search">-->
                            <!--<t t-set="_classes">o_website_sale_search</t>-->
                            <!--</t>-->
                            <div class="input-group">
                                <input type="text" name="search" class="search-query form-control oe_search_box" placeholder="Search..." t-att-value="search"/>
<!--                                <div class="input-group-append">-->
<!--                                    <button class="btn btn-secondary oe_search_button" aria-label="Search" title="Search"><i class="fa fa-search"/></button>-->
<!--                                </div>-->
                            </div>
                        </div>
                        <t>
                            <div class="row">
<!--                                <div class="col-12">-->
<!--                                    <t t-call="ordering_e_commerce.wizard_checkout">-->
<!--                                        <t t-set="step" t-value="10"/>-->
<!--                                    </t>-->
<!--                                </div>-->
                                <div class="col-12 col-xl-8 oe_cart blanket_order_select">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <t t-call="ordering_e_commerce.cart_lines"/>
                                            <div class="clearfix"/>
<!--                                            <a role="button" href="/enterprise"-->
<!--                                               class="btn btn-secondary mb32 d-none d-xl-inline-block">-->
<!--                                                <span class="fa fa-chevron-left"/>-->
<!--                                                <span class="">Continue Shopping</span>-->
<!--                                            </a>-->

                                            <span role="button"
                                                  class="btn btn-primary float-right d-none d-xl-inline-block next-steps">
                                                <span class="">Process Checkout</span>
                                                <span class="fa fa-chevron-right"/>
                                            </span>
                                            <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-xl-8 oe_cart blanket_address_checkout">
                                    <t t-call="ordering_e_commerce.address_checkout"/>
                                    <div id="blanket_address_information"/>
                                </div>

                                <div class="col-12 col-xl-8 oe_cart blanket_payment"/>

                                <div class="col-12 col-xl-8 oe_cart blanket_confirm"/>

                                <div class="col-12 col-xl-4">
                                    <t t-call="ordering_e_commerce.cart_summary"/>
                                    <div class="d-xl-none mt8">
                                        <a role="button" href="/enterprise" class="btn btn-secondary mb32">
                                            <span class="fa fa-chevron-left"/>
                                            Continue
                                            <span class="d-none d-md-inline">Shopping</span>
                                        </a>
                                        <a role="button"
                                           class="btn btn-primary float-right" href="url">
                                            <span class="">Process Checkout</span>
                                            <span class="fa fa-chevron-right"/>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                    <div class="oe_structure" id="oe_structure_website_blanket_cart_2"/>
                </div>
            </t>
        </template>

        <template id="ordering_e_commerce.address_checkout">
            <div class="col-12 col-xl order-xl-1 oe_cart">
                <div class="row">
                    <div class="col-lg-12">
                        <h3 class="o_page_header mt8">Billing Address</h3>
                    </div>
                    <div class="col-lg-6 one_kanban" t-att-data-id="billing_id.id">
                        <t t-call="ordering_e_commerce.address_kanban">
                            <t t-set='contact' t-value="billing_id"/>
                            <t t-if="website.partner_id.id == billing_id.id">
                                <t t-set='selected' t-value="1"/>
                            </t>
                            <t t-set='readonly' t-value="1"/>
                            <t t-set='mode' t-value="'billing'"/>
                        </t>
                    </div>
                </div>
                <t groups="sale.group_delivery_invoice_address">
                    <div class="row">
                        <div class="col-lg-12">
                            <h3 class="o_page_header mt16 mb4">Shipping Address</h3>
                        </div>
                    </div>
                    <div class="row all_shipping">
                        <div class="col-lg-12">
                            <div class="row mt8">
                                <div class="col-md-12 col-lg-12 one_kanban">
                                    <span role="button"
                                       class='a-submit btn btn-secondary mb16 btn-block add-new-address'>
                                        <i class="fa fa-plus-square"/>
                                        <span>Add an address</span>
                                    </span>
                                </div>
                                <t t-foreach="shippings" t-as="shipping">
                                    <div class="col-md-12 col-lg-6 one_kanban" t-att-data-id="shipping.id">
                                        <t t-call="ordering_e_commerce.address_kanban">
                                            <t t-set='contact' t-value="shipping"/>
                                            <t t-if="shipping.id == shipping_id.id">
                                                <t t-set='selected' t-value="1"/>
                                            </t>
                                            <t t-set='readonly' t-value="0"/>
                                            <t t-set='mode' t-value="'shipping'"/>
                                        </t>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </t>
                <div class="d-flex justify-content-between mt-3">
                    <span role="button" class="btn btn-secondary mb32 address-checkout-back">
                        <i class="fa fa-chevron-left"/>
                        <span>Return to Cart</span>
                    </span>
                    <span role="button" class="btn btn-primary mb32 address-checkout-confirm">
                        <span>Confirm</span>
                        <i class="fa fa-chevron-right"/>
                    </span>
                </div>
            </div>
        </template>

        <template id="cart_summary" name="Cart right column">
            <div class="card">
                <div class="card-body cart_summary_body">
                    <div class="cart_summary_title">
                        <h4 class="d-none d-xl-block">Order Total</h4>
                        <hr class="d-none d-xl-block"/>
                    </div>
                    <div class="toggle_summary_div d-none d-xl-block">
                        <div id="cart_products_summary">
                            <table class="table table-striped table-sm">
                                <thead>
                                    <tr>
                                        <th class="border-top-0 td-img">Product</th>
                                        <th class="border-top-0"/>
                                        <th class="border-top-0 td-qty">Quantity</th>
                                        <th class="border-top-0 text-center td-price">Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="product_ids" t-as="line">
                                        <t t-set="line" t-value="line.sudo()"/>
                                        <t t-set="first_possible_combination" t-value="line.product_tmpl_id._get_first_possible_combination()"/>
                                        <t t-set="combination_info" t-value="line.product_tmpl_id._get_combination_info(first_possible_combination, add_qty=1, pricelist=pricelist)"/>
                                        <tr t-att-data-line-id="line.id" class="cart_products_summary_line"
                                            t-att-data-line-price_unit="combination_info['price']">
                                            <td class='td-img' t-if="line.product_tmpl_id">
                                                <span t-field="line.image_small"
                                                      t-options="{'widget': 'image', 'class': 'rounded'}"/>
                                            </td>
                                            <td class='td-product_name' t-if="line.product_tmpl_id">
                                                <div>
                                                    <strong t-field="line.product_tmpl_id.name"/>
                                                </div>
                                            </td>
                                            <td class='text-center td-qty'>0</td>
                                            <td class="text-center td-price">
                                                <span t-esc="0.0" style="white-space: nowrap;"
                                                      t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>

                        <div id="cart_total" t-att-class="extra_class or ''">
                            <table class="table">
                                <tr id="empty">
                                    <t t-if='not no_rowspan'><td rowspan="10" class="noborder"/></t>
                                    <td class="col-md-2 col-3 noborder"/>
                                    <td class="col-md-2 col-3 noborder" />
                                </tr>
                                <tr id="order_total_untaxed">
                                    <td class="text-right noborder">Subtotal:</td>
                                    <td class="text-xl-right noborder amount_subtotal">
                                        <span t-esc="0.0" style="white-space: nowrap;"
                                              t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                    </td>
                                </tr>
                                <tr id="order_total_taxes">
                                    <td class="text-right noborder">Taxes:</td>
                                    <td class="text-xl-right noborder amount_tax">
                                        <span t-esc="0.0" style="white-space: nowrap;"
                                              t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                                    </td>
                                </tr>
                                <tr id="order_total">
                                    <td class="text-right"><strong>Total:</strong></td>
                                    <td class="text-xl-right amount_total">
                                        <strong t-esc="0.0" style="white-space: nowrap;"
                                                t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                    </td>
                                  </tr>
                            </table>
                        </div>

                        <div class="checkout">
                            <span role="button"
                                  class="btn btn-primary float-right d-none d-xl-inline-block next-steps">
                                <span class="">Process Checkout</span>
                                <span class="fa fa-chevron-right"/>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="address_kanban" name="Kanban address">
            <div t-attf-class="card #{selected and 'border_primary' or 'js_change_shipping'}">
                <div class='card-body' style='min-height: 130px;'>
                    <span t-if="not actual_partner or (ship.id in actual_partner.child_ids.ids)"
                          class="btn btn-link float-right p-0 js_edit_address no-decoration" role="button"
                          title="Edit this address" aria-label="Edit this address"
                          t-att-data-id="contact and contact.id"
                          t-att-mode="mode">
                        <i class='fa fa-edit'/>
                    </span>
                    <t t-if="contact">
                        <t t-esc="contact" t-options="dict(widget='contact', fields=['name', 'address'], no_marker=True)"/>
                    </t>
                </div>
                <div class='card-footer' t-if='not readonly'>
                    <span class='btn-ship' t-att-style="'' if selected else 'display:none;'">
                        <a role="button" href='#' class="btn btn-block btn-primary">
                            <i class='fa fa-check'/>
                            Ship to this address
                        </a>
                    </span>
                    <span class='btn-ship' t-att-style="'' if not selected else 'display:none;'">
                        <a role="button" href='#' class="btn btn-block btn-secondary">
                            Select this address
                        </a>
                    </span>
                </div>
            </div>
        </template>

        <template id="address-form">
            <form t-att-data-id="partner_id"
                    id="address-form-information">
                <div class="col-12 col-xl order-xl-1 oe_cart">
                    <div>
                        <t t-if="mode == ('new', 'billing')">
                            <h2 class="o_page_header mt8">Your Address
                                <small>or</small>
                                <a role="button" href='/web/login?redirect=url'
                                   class='btn btn-primary' style="margin-top: -11px">Log In
                                </a>
                            </h2>
                        </t>
                        <t t-if="mode == ('edit', 'billing')">
                            <h2 class="o_page_header mt8">Your Address</h2>
                        </t>
                        <t t-if="mode[1] == 'shipping'">
                            <h2 class="o_page_header mt8">Shipping Address</h2>
                        </t>
                        <t>
                            <div class="alert alert-warning" role="alert">
                                <h4 class="alert-heading">Be aware!</h4>
                                <p>
                                    You are editing your <b>billing and shipping</b> addresses at the same
                                    time!
                                    <br/>
                                    If you want to modify your shipping address, create a <a class="add-new-address" href='#'>new address</a>.
                                </p>
                            </div>
                        </t>
                        <t t-if="error" t-foreach="error.get('error_message', [])" t-as="err">
                            <h4 class="text-danger" t-esc="err"/>
                        </t>
                        <div class="form-row">
                            <div t-attf-class="form-group #{error.get('name') and 'o_has_error' or ''} col-lg-12 div_name">
                                <label class="col-form-label" for="name">Name</label>
                                <input type="text" name="name"
                                       t-attf-class="form-control #{error.get('name') and 'is-invalid' or ''}"
                                       t-att-value="'name' in checkout and checkout['name']"/>
                            </div>
                            <div class="w-100"/>
                            <t t-if="mode[1] == 'billing'">
                                <div t-attf-class="form-group #{error.get('email') and 'o_has_error' or ''} col-lg-6"
                                     id="div_email">
                                    <label class="col-form-label" for="email">Email</label>
                                    <input type="email" name="email"
                                           t-attf-class="form-control #{error.get('email') and 'is-invalid' or ''}"
                                           t-att-value="'email' in checkout and checkout['email']"/>
                                </div>
                            </t>
                            <div t-attf-class="form-group #{error.get('phone') and 'o_has_error' or ''} col-lg-6"
                                 id="div_phone">
                                <label class="col-form-label" for="phone">Phone</label>
                                <input type="tel" name="phone"
                                       t-attf-class="form-control #{error.get('phone') and 'is-invalid' or ''}"
                                       t-att-value="'phone' in checkout and checkout['phone']"/>
                            </div>
                            <div class="w-100"/>
                            <div t-attf-class="form-group #{error.get('street') and 'o_has_error' or ''} col-lg-12 div_street">
                                <label class="col-form-label" for="street">Street
                                    <span class="d-none d-md-inline">and Number</span>
                                </label>
                                <input type="text" name="street"
                                       t-attf-class="form-control #{error.get('street') and 'is-invalid' or ''}"
                                       t-att-value="'street' in checkout and checkout['street']"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('street2') and 'o_has_error' or ''} col-lg-12 div_street2">
                                <label class="col-form-label label-optional" for="street2">Street 2
                                </label>
                                <input type="text" name="street2"
                                       t-attf-class="form-control #{error.get('street2') and 'is-invalid' or ''}"
                                       t-att-value="'street2' in checkout and checkout['street2']"/>
                            </div>
                            <div class="w-100"/>
                            <t t-set='zip_city'
                               t-value='country and [x for x in country.get_address_fields() if x in ["zip", "city"]] or ["city", "zip"]'/>
                            <t t-if="'zip' in zip_city and zip_city.index('zip') &lt; zip_city.index('city')">
                                <div t-attf-class="form-group #{error.get('zip') and 'o_has_error' or ''} col-md-4 div_zip">
                                    <label class="col-form-label label-optional" for="zip">Zip Code
                                    </label>
                                    <input type="text" name="zip"
                                           t-attf-class="form-control #{error.get('zip') and 'is-invalid' or ''}"
                                           t-att-value="'zip' in checkout and checkout['zip']"/>
                                </div>
                            </t>
                            <div t-attf-class="form-group #{error.get('city') and 'o_has_error' or ''} col-md-8 div_city">
                                <label class="col-form-label" for="city">City</label>
                                <input type="text" name="city"
                                       t-attf-class="form-control #{error.get('city') and 'is-invalid' or ''}"
                                       t-att-value="'city' in checkout and checkout['city']"/>
                            </div>
                            <t t-if="'zip' in zip_city and zip_city.index('zip') &gt; zip_city.index('city')">
                                <div t-attf-class="form-group #{error.get('zip') and 'o_has_error' or ''} col-md-4 div_zip">
                                    <label class="col-form-label label-optional" for="zip">Zip Code
                                    </label>
                                    <input type="text" name="zip"
                                           t-attf-class="form-control #{error.get('zip') and 'is-invalid' or ''}"
                                           t-att-value="'zip' in checkout and checkout['zip']"/>
                                </div>
                            </t>
                            <div class="w-100"/>
                            <div t-attf-class="form-group #{error.get('country_id') and 'o_has_error' or ''} col-lg-6 div_country">
                                <label class="col-form-label" for="country_id">Country</label>
                                <select id="country_id" name="country_id"
                                        t-attf-class="form-control #{error.get('country_id') and 'is-invalid' or ''}">
                                    <option value="">Country...</option>
                                    <t t-foreach="countries" t-as="c">
                                        <option t-att-value="c.id"
                                                t-att-selected="c.id == (country and country.id or -1)">
                                            <t t-esc="c.name"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div t-attf-class="form-group #{error.get('state_id') and 'o_has_error' or ''} col-lg-6 div_state"
                                 t-att-style="(not country or not country.state_ids) and 'display: none'">
                                <label class="col-form-label" for="state_id">State / Province</label>
                                <select name="state_id"
                                        t-attf-class="form-control #{error.get('state_id') and 'is-invalid' or ''}"
                                        data-init="1">
                                    <option value="">State / Province...</option>
                                    <t t-foreach="country and country.state_ids or []" t-as="s">
                                        <option t-att-value="s.id"
                                                t-att-selected="s.id == ('state_id' in checkout and country and checkout['state_id'] != '' and int(checkout['state_id']))">
                                            <t t-esc="s.name"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="w-100"/>
                            <t>
                                <div class="col-lg-12">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id='shipping_use_same' class="mr8"
                                                   name='use_same' value="1" checked='checked'/>Ship to the same address
                                            <span class='ship_to_other text-muted'
                                                  style="display: none">&amp;nbsp;(<i>Your shipping address will be requested later)</i>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </t>
                        </div>

                        <div class="d-flex justify-content-between">
                            <span role="button"
                                  class="btn btn-secondary mb32 address-form-back">
                                <i class="fa fa-chevron-left"/>
                                <span>Back</span>
                            </span>
                            <span role="button"
                                  class="btn btn-primary mb32 a-submit a-submit-disable a-submit-loading address-form-submit">
                                <span>Next</span>
                                <i class="fa fa-chevron-right"/>
                            </span>
                        </div>
                    </div>
                </div>
            </form>
        </template>

<!--        <template id="address" name="Address Management">-->
<!--            <t t-set="no_footer">1</t>-->
<!--            <t t-call="website.layout">-->
<!--                <div id="wrap">-->
<!--                    <div class="container oe_website_sale py-2">-->
<!--                        <div class="row">-->
<!--                            <div class="col-12">-->
<!--                                <t t-call="ordering_e_commerce.wizard_checkout">-->
<!--                                    <t t-set="step" t-value="20"/>-->
<!--                                </t>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="row">-->
<!--                            <div class="col-12 col-xl-auto order-xl-2 d-none d-xl-block">-->
<!--                                <t t-call="ordering_e_commerce.cart_summary">-->
<!--                                    <t t-set="hide_coupon">True</t>-->
<!--                                    <t t-set="redirect" t-valuef="/enterprise/address"/>-->
<!--                                </t>-->
<!--                            </div>-->

<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </t>-->
<!--        </template>-->

        <template id="payment" name="Payment">
            <div class="col-12 col-xl order-xl-1 oe_cart">
                <div class="card">
                    <div class="card-body" id="shipping_and_billing">
                        <span class='float-right no-decoration payment-back'><i class="fa fa-edit"/> Edit</span>
                        <t t-set="same_shipping" t-value="bool(shipping_id==order.partner_id)" />
                        <div><b>Billing<t t-if="same_shipping"> &amp; Shipping</t>: </b><span t-esc='order.partner_id' t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')" class="address-inline"/></div>
                        <div t-if="not same_shipping" groups="sale.group_delivery_invoice_address"><b>Shipping: </b>
                            <span t-esc='shipping_id' t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"  class="address-inline"/>
                        </div>
                    </div>
                </div>

                <div class="oe_structure clearfix mt-3" id="oe_structure_website_sale_payment_1"/>

                <div id="payment_method" class="mt-3" t-if="(acquirers or tokens) and website_sale_order.amount_total">
                    <h3 class="mb24">Pay with </h3>
                    <div class="card">
                        <t t-set="acquirers_count" t-value="len(acquirers) if acquirers else 0"/>
                        <t t-set="pms_count" t-value="len(pms) if pms else 0"/>
                        <t t-set="MAX_BRAND_LINE" t-value="3"/>
                        <t t-foreach="acquirers" t-as="acq">
                            <div class="card-body">
                                <label>
                                    <t t-if="acq.payment_flow == 'form'">
                                        <input type="radio" t-att-data-acquirer-id="acq.id"
                                               t-att-data-form-payment="true"
                                               t-att-data-provider="acq.provider"
                                               t-att-class="'d-none' if (acquirers_count==1 and pms_count==0) else ''"
                                               name="pm_id" t-attf-value="form_{{acq.id}}"
                                               t-att-checked="acquirers_count==1 and pms_count==0 or acquirers[0] == acq"/>
                                    </t>
                                    <t t-else="acq.payment_flow == 's2s'">
                                        <input type="radio" t-att-data-acquirer-id="acq.id"
                                               t-att-data-s2s-payment="true"
                                               t-att-data-provider="acq.provider"
                                               name="pm_id" t-attf-value="new_{{acq.id}}"
                                               t-att-class="'d-none' if (acquirers_count==1 and pms_count==0) else ''"
                                               t-att-checked="acquirers_count==1 and pms_count==0 or acquirers[0] == acq"/>
                                    </t>
                                    <span class="payment_option_name" t-esc="acq.name"/>
                                </label>
                                <ul class="float-right list-inline payment_icon_list">
                                    <t t-set="i" t-value="0"/>
                                    <t t-foreach="acq.payment_icon_ids" t-as="pm_icon">
                                        <li t-attf-class="list-inline-item#{'' if (i &lt; MAX_BRAND_LINE) else ' d-none'}">
                                            <span t-field="pm_icon.image_payment_form"
                                                  t-options='{"widget": "image", "alt-field": "name"}'/>
                                        </li>
                                        <li t-if="i==MAX_BRAND_LINE" style="display:block;" class="list-inline-item">
                                            <span class="float-right more_option text-info">
                                                <a href="#" class="o_payment_form_pay_icon_more" data-toggle="tooltip" t-att-title="', '.join([opt.name for opt in acq.payment_icon_ids[MAX_BRAND_LINE:]])">and more</a>
                                            </span>
                                        </li>
                                        <t t-set="i" t-value="i+1"/>
                                    </t>
                                </ul>
                            </div>
<!--                            <t t-if="acq.payment_flow == 'form'">-->
<!--                                <div t-attf-id="o_payment_form_acq_{{acq.id}}"-->
<!--                                     t-attf-class="d-none {{'card-footer' if acq.save_token == 'ask' else ''}}">-->
<!--                                    <label t-if="acq.save_token == 'ask'">-->
<!--                                        <input type="checkbox" name="o_payment_form_save_token" data-remove-me=""/>-->
<!--                                        Save my payment data-->
<!--                                    </label>-->
<!--                                    <t t-if="acq.save_token == 'always'">-->
<!--                                        <input type="checkbox" name="o_payment_form_save_token" checked="'checked'" class="o_hidden" data-remove-me=""/>-->
<!--                                    </t>-->
<!--                                </div>-->
<!--                            </t>-->
<!--                            <t t-else="acq.payment_flow == 's2s'">-->
<!--                                <div t-attf-id="o_payment_add_token_acq_{{acq.id}}"-->
<!--                                     t-attf-class="card-footer {{'d-none' if(acquirers_count &gt; 1 and pms_count==0 and acquirers[0]!=acq) else 'd-none' if pms_count &gt;0 else ''}}">-->
<!--                                    <div class="clearfix">-->
<!--                                        <t t-call="{{acq.sudo().get_s2s_form_xml_id()}}">-->
<!--                                            <t t-set="id" t-value="acq.id"/>-->
<!--                                            <t t-set="partner_id" t-value="partner_id"/>-->
<!--                                            <t t-if="not return_url" t-set="return_url" t-value="''"/>-->
<!--                                        </t>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </t>-->
                        </t>
<!--                        <t t-foreach="pms" t-as="pm">-->
<!--                            <div class="card-body">-->
<!--                                <label>-->
<!--                                    <input t-if="mode == 'payment'" type="radio" name="pm_id" t-att-value="pm.id" t-att-checked="checked_pm_id == pm.id"/>-->
<!--                                    <span class="payment_option_name" t-esc="pm.name"/>-->
<!--                                    <t t-if="pm.verified">-->
<!--                                        <i class="fa fa-check text-success" title="This payment method is verified by our system." role="img" aria-label="Ok"/>-->
<!--                                    </t>-->
<!--                                    <t t-else="">-->
<!--                                        <i class="fa fa-close text-danger" title="This payment method has not been verified by our system." role="img" aria-label="Not verified"/>-->
<!--                                    </t>-->
<!--                                </label>-->
<!--                                <button t-if="mode == 'manage'" name="delete_pm" t-att-value="pm.id" class="btn btn-primary btn-sm float-right">-->
<!--                                    <i class="fa fa-trash"/> Delete-->
<!--                                </button>-->
<!--                            </div>-->
<!--                        </t>-->
                    </div>

                    <div class="d-flex justify-content-between button-group-payment">
                        <span role="button"
                              class="btn btn-secondary mb32 payment-back">
                            <i class="fa fa-chevron-left"/>
                            <span>Back</span>
                        </span>
                        <span role="button"
                              class="btn btn-primary mb32 a-submit a-submit-disable a-submit-loading blanket-order-confirm">
                            <span>Confirm Order</span>
                            <i class="fa fa-chevron-right"/>
                        </span>
                    </div>
                </div>

<!--                <div t-if="not acquirers" class="mt-2">-->
<!--                    <a role="button" class="btn-link"-->
<!--                        groups="base.group_system"-->
<!--                        t-attf-href="/web#return_label=Website&amp;action=#{payment_action_id}">-->
<!--                            <i class="fa fa-arrow-right"/> Add payment acquirers-->
<!--                    </a>-->
<!--                </div>-->
<!--                <div class="js_payment mt-3" t-if="not website_sale_order.amount_total" id="payment_method">-->
<!--                    <form target="_self" action="/shop/payment/validate" method="post" class="float-right">-->
<!--                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />-->
<!--                        <a role="button" class="btn btn-primary a-submit" href="#">-->
<!--                            <span t-if="order.amount_total &gt; 0">Pay Now <span class="fa fa-chevron-right"/></span>-->
<!--                            <span t-if="order.amount_total == 0">Confirm Order <span class="fa fa-chevron-right"/></span>-->
<!--                        </a>-->
<!--                    </form>-->
<!--                </div>-->
            </div>
        </template>

        <template id="confirmation">
            <div class="container oe_website_sale py-2">
                <h1><span>Order</span> <em t-field="order.name" /> <t t-if="order.state == 'sale'"><span>Confirmed</span></t></h1>
                <div class="row">
                    <div class="col-12 col-xl">
                        <div class="oe_cart">
                            <t t-set="payment_tx_id" t-value="order.get_portal_last_transaction()"/>
                            <t t-if="payment_tx_id.state == 'done'">
                                <div class="thanks_msg">
                                    <h2>Thank you for your order.
                                        <a role="button" class="btn btn-primary d-none d-md-inline-block" href="/shop/print" target="_blank" aria-label="Print" title="Print"><i class="fa fa-print"></i> Print</a>
                                    </h2>
                                </div>
                            </t>
                            <t t-if="request.env['res.users']._get_signup_invitation_scope() == 'b2c' and request.website.is_public_user()">
                                <p class="alert alert-info mt-3" role="status">
                                    <a role="button" t-att-href='order.partner_id.signup_prepare() and order.partner_id.signup_url' class='btn btn-primary'>Sign Up</a>
                                     to follow your order.
                                </p>
                            </t>
                            <div class="oe_structure clearfix mt-3" id="oe_structure_website_sale_confirmation_1"/>
                            <h3 class="text-left mt-3">
                                <strong>Payment Information:</strong>
                            </h3>
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td colspan="2">
                                            <t t-esc="order.get_portal_last_transaction().acquirer_id.name" />
                                        </td>
                                        <td class="text-right" width="100">
                                            <strong>Total:</strong>
                                        </td>
                                        <td class="text-right" width="100">
                                            <strong t-field="order.amount_total" t-options="{'widget': 'monetary', 'display_currency': order.pricelist_id.currency_id}" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <t t-call="ordering_e_commerce.payment_confirmation_status"/>
                            <div class="card mt-3">
                              <div class="card-body">
                                <t t-set="same_shipping" t-value="bool(order.partner_shipping_id==order.partner_id or only_services)" />
                                <div><b>Billing <t t-if="same_shipping and not only_services"> &amp; Shipping</t>: </b><span t-esc='order.partner_id' t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')" class="address-inline"/></div>
                                <div t-if="not same_shipping and not only_services" groups="sale.group_delivery_invoice_address"><b>Shipping: </b><span t-esc='order.partner_shipping_id' t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"  class="address-inline"/></div>
                              </div>
                            </div>
                            <div class="oe_structure mt-3" id="oe_structure_website_sale_confirmation_2"/>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="payment_confirmation_status">
            <div class="oe_website_sale_tx_status mt-3" t-att-data-order-id="order.id">
                <t t-set="payment_tx_id" t-value="order.get_portal_last_transaction()"/>
                <div class="card">
                    <div t-att-class="'card-header %s' % (
                        (payment_tx_id.state == 'pending' and 'bg-info') or
                        (payment_tx_id.state == 'done' and 'bg-success') or
                        (payment_tx_id.state == 'authorized' and 'bg-success') or
                        'bg-danger')">
                        <a role="button" groups="base.group_system" class="btn btn-sm btn-link text-white float-right" target="_blank" aria-label="Edit" title="Edit"
                                t-att-href="'/web#model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % ('payment.acquirer', payment_tx_id.acquirer_id.id, 'payment.action_payment_acquirer')">
                            <i class="fa fa-pencil"/>
                        </a>
                        <t t-if="payment_tx_id.state == 'pending'">
                            <t t-raw="payment_tx_id.acquirer_id.pending_msg"/>
                        </t>
                        <t t-if="payment_tx_id.state == 'done'">
                            <t t-raw="payment_tx_id.acquirer_id.done_msg"/>
                        </t>
                        <t t-if="payment_tx_id.state == 'cancel'">
                            <t t-raw="payment_tx_id.acquirer_id.cancel_msg"/>
                        </t>
                        <t t-if="payment_tx_id.state == 'error'">
                            <span t-if="payment_tx_id.acquirer_id.error_msg" t-raw="payment_tx_id.acquirer_id.error_msg"/>
                            <span t-else="">An error occured while processing your payment. Please try again or contact your administrator.</span>
                        </t>
                        <t t-if="payment_tx_id.state == 'authorized'">
                            <span>Your payment has been authorized.</span>
                        </t>
                    </div>
                    <div t-if="payment_tx_id.acquirer_id.post_msg" t-att-class="'card-body %s' % (
                        (payment_tx_id.state == 'pending' and 'bg-info-light') or
                        (payment_tx_id.state == 'done' and 'bg-success-light') or
                        (payment_tx_id.state == 'authorized' and 'bg-success-light') or
                        'bg-danger-light')">
                        <t t-raw="payment_tx_id.acquirer_id.post_msg" />
                        <div t-if="payment_tx_id.acquirer_id.provider == 'transfer' and order.reference">
                            <b>Communication: </b><span t-esc='order.reference'/>
                        </div>
                    </div>
                    <div t-if="(payment_tx_id.acquirer_id.qr_code == True) and (payment_tx_id.acquirer_id.provider == 'transfer') and (payment_tx_id.currency_id.name == 'EUR')">
                        <div class="card-body" t-if="payment_tx_id.acquirer_id.journal_id.bank_account_id.qr_code_valid">
                            <h3>Or scan me with your banking app.</h3>
                            <img class="border border-dark rounded" t-att-src="payment_tx_id.acquirer_id.journal_id.bank_account_id.build_qr_code_url(order.amount_total,payment_tx_id.reference)"/>
                        </div>
                        <div class="card-body" t-if="payment_tx_id.acquirer_id.journal_id.bank_account_id.qr_code_valid == False">
                            <h3>The SEPA QR Code informations are not set correctly.</h3>
                        </div>
                    </div>
                </div>
            </div>
        </template>
</odoo>